{% extends "master.html" %}

{% block title %}
   {{ post.title }} 
{% endblock %}

{% block content %}
    <p>{{ post.content }}</p>
    <p><a href="{% url 'profile_view' post.author.id %}">Author: {{ post.author }}</a></p>
    <p>Created at: {{ post.created_at }}</p>

    <h2>New Comment</h2>
    <form action="{% url 'comment_add' post.id %}" method="POST">
        {% csrf_token %}
        <textarea name="content" required rows="4" cols="50"></textarea><br>
        <button type="submit">Submit</button>
    </form>

    <h2>Comments</h2>
    <a href="{% url 'comment_list' post.id %}"><button>Show Comments</button></a>
    <ul>
        {% for comment in comments %}
            <li><a href="{% url 'profile_view' comment.author.id %}">{{ comment.author }}</a>: {{ comment.content }}</li>
        {% empty %}
            <li>No comments yet.</li>
        {% endfor %}
    </ul>

    <p>Back to <a href="{% url 'posts' %}">Posts</a></p>
{% endblock %}
